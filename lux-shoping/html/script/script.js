var localesProperty = {
    "USER_WELCOME": "Xin Chào,",
    "USER_BOTTOM_WELCOME_FIRST": "Cửa Hàng",
    "USER_BOTTOM_WELCOME_SECOND": "Tiện Lợi",
    "MOST_SALED_ITEMS": "Mặt Hàng Bán Chạy Nhất",
    "ADD_TO_CARD": "Giỏ Hàng",
    "ALL_ITEMS_CATEGORIES": "Tất Cả",
    "DRINKS_ITEMS_CATEGORIES": "Nước",
    "FRUITS_ITEMS_CATEGORIES": "Trái Cây",
    "ALCOHOLS_ITEMS_CATEGORIES": "Rượu",
    "FASTFOOD_ITEMS_CATEGORIES": "Thức Ăn Nhanh",
    "TOOLS_ITEMS_CATEGORIES": "Công Cụ",
    "MEDICALS_ITEMS_CATEGORIES": "Y Tế",
    "MY_CARD": "Giỏ Hàng",
    "PAY_WITH_CASH": "Tiền Mặt",
    "PAY_WITH_CARD": "Ngân Hàng"
}




var styleProperty = {
    "MAIN_BTN_COLOR_NIGHT" : "rgba(255, 255, 255, 0.89)",
    "MAIN_BTN_COLOR_DAY" : "#000",
    "SHOP_BODY_BG_NIGHT" : "linear-gradient(180deg, #1C1C1C 0%, #161616 134.86%),linear-gradient(301.95deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 28.96%),linear-gradient(122.69deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 18.32%)",
    "MAIN_VERTICAL_ITEM_BG_NIGHT": "rgba(31, 31, 31, 0.68)",
    "MAIN_QUAD_ITEM_BG_NIGHT": "rgba(31, 31, 31, 0.68)",
    "CATEGORIES_BTN_SVG_NIGHT": "rgba(255, 255, 255, 0.89)",
    "USER_INFO_COLOR_NIGHT": "#FFFFFF",
    "LOGIN_PAGE_DESCRIPTION_NIGHT": "#FFFFFF",
    "MAIN_BTN_INNER_NIGHT": "#1F1F1F",
    "MAIN_BTN_OUTER_NIGHT": "linear-gradient(315deg, #9b9b9b -87.59%, rgba(255, 255, 255, 0) 40.19%) padding-box,linear-gradient(135deg, #9b9b9b -91.37%, rgba(255, 255, 255, 0) 43.48%) border-box #1F1F1F",
    "SHOP_BODY_BG_DAY" : "linear-gradient(180deg, #CDD1CB 0%, #999999 134.86%), linear-gradient(117.6deg, rgba(255, 255, 255, 0) 0%, #FFFFFF 122.24%), linear-gradient(117.6deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 122.24%)",
    "MAIN_VERTICAL_ITEM_BG_DAY": "#D9D9D9",
    "MAIN_QUAD_ITEM_BG_DAY": "#D9D9D9",
    "CATEGORIES_BTN_SVG_DAY": "rgba(0, 0, 0, 0.32)",
    "CATEGORIES_BTN_BG_DAY": "linear-gradient(315deg, #FFFFFF 13.41%, rgba(255, 255, 255, 0) 44.19%) padding-box,linear-gradient(135deg, #FFFFFF -1.37%, rgba(255, 255, 255, 0) 29.48%) border-box",
    "USER_INFO_COLOR_DAY": "#737B8F",
    "LOGIN_PAGE_DESCRIPTION_DAY": "#737B8F",
    "MAIN_BTN_INNER_DAY": "#D9D9D9",
    "MAIN_BTN_OUTER_DAY": "linear-gradient(315deg, #FFFFFF 13.41%, rgba(255, 255, 255, 0) 44.19%) padding-box,linear-gradient(135deg, #FFFFFF -1.37%, rgba(255, 255, 255, 0) 29.48%) border-box",
    "DRINKS_CATEGORIES_BTN_BG_NIGHT": "linear-gradient(-50deg, #84F8E3 -60.59%, rgba(255, 255, 255, 0) 59.19%) padding-box padding-box, linear-gradient(147deg, #84F8E3 -24.37%, rgba(255, 255, 255, 0) 57.48%) border-box border-box rgb(31, 31, 31)",
    "ALL_CATEGORIES_BTN_BG_NIGHT": "linear-gradient(315deg, #44A348 -77.59%, rgba(255, 255, 255, 0) 54.19%) padding-box , linear-gradient(382deg, #7C7C80 -87.59%, rgba(255, 255, 255, 0) 54.19%), linear-gradient(585deg, #DF2F28 -87.59%, rgba(255, 255, 255, 0) 59.19%), linear-gradient(135deg, #F47E20 -91.37%, rgba(255, 255, 255, 0) 53.48%) border-box border-box rgb(31, 31, 31)",
    "FRUITS_CATEGORIES_BTN_BG_NIGHT": "linear-gradient(-50deg, #00FF3A -60.59%, rgba(255, 255, 255, 0) 59.19%) padding-box padding-box, linear-gradient(147deg, #00FF3A -24.37%, rgba(255, 255, 255, 0) 57.48%) border-box border-box rgb(31, 31, 31)",
    "ALCOHOLS_CATEGORIES_BTN_BG_NIGHT": "linear-gradient(-50deg, #FF0000 -60.59%, rgba(255, 255, 255, 0) 59.19%) padding-box padding-box, linear-gradient(147deg, #FF0000 -24.37%, rgba(255, 255, 255, 0) 57.48%) border-box border-box rgb(31, 31, 31)",
    "FASTFOOD_CATEGORIES_BTN_BG_NIGHT": "linear-gradient(-50deg, #FF5C00 -60.59%, rgba(255, 255, 255, 0) 59.19%) padding-box padding-box, linear-gradient(147deg, #FF5C00 -24.37%, rgba(255, 255, 255, 0) 57.48%) border-box border-box rgb(31, 31, 31)",
    "TOOLS_CATEGORIES_BTN_BG_NIGHT": "linear-gradient(-50deg, white -60.59%, rgba(255, 255, 255, 0) 59.19%) padding-box padding-box, linear-gradient(147deg, white -24.37%, rgba(255, 255, 255, 0) 57.48%) border-box border-box rgb(31, 31, 31)",
    "MEDICALS_CATEGORIES_BTN_BG_NIGHT": "linear-gradient(-50deg, #FF00B8 -60.59%, rgba(255, 255, 255, 0) 59.19%) padding-box padding-box, linear-gradient(147deg, #FF00B8 -24.37%, rgba(255, 255, 255, 0) 57.48%) border-box border-box rgb(31, 31, 31)",

    "DRINKS_CATEGORIES_BG_DAY": "linear-gradient(315deg, #84F8E3 12.41%, rgba(255, 255, 255, 0) 59.19%) padding-box,linear-gradient(135deg, #84F8E3 -1.37%, rgba(255, 255, 255, 0) 82.48%) border-box",
    "ALL_CATEGORIES_BTN_BG_DAY": "linear-gradient(315deg, #44A348 -77.59%, rgba(255, 255, 255, 0) 54.19%) padding-box , linear-gradient(382deg, #7C7C80 -87.59%, rgba(255, 255, 255, 0) 54.19%), linear-gradient(585deg, #DF2F28 -87.59%, rgba(255, 255, 255, 0) 59.19%), linear-gradient(135deg, #F47E20 -91.37%, rgba(255, 255, 255, 0) 53.48%) border-box border-box rgb(243 243 243)",
    "FRUITS_CATEGORIES_BTN_BG_DAY": "linear-gradient(315deg, #82FF9E 12.41%, rgba(255, 255, 255, 0) 59.19%) padding-box,linear-gradient(135deg, #82FF9E -1.37%, rgba(255, 255, 255, 0) 82.48%) border-box",
    "ALCOHOLS_CATEGORIES_BTN_BG_DAY": "linear-gradient(315deg, #FF8282 12.41%, rgba(255, 255, 255, 0) 59.19%) padding-box,linear-gradient(135deg, #FF8282 -1.37%, rgba(255, 255, 255, 0) 82.48%) border-box",
    "FASTFOOD_CATEGORIES_BTN_BG_DAY": "linear-gradient(315deg, #FFAF82 12.41%, rgba(255, 255, 255, 0) 59.19%) padding-box,linear-gradient(135deg, #FFAF82 -1.37%, rgba(255, 255, 255, 0) 82.48%) border-box",
    "TOOLS_CATEGORIES_BTN_BG_DAY": "linear-gradient(315deg, #000000 -5.59%, rgba(255, 255, 255, 0) 80.19%) padding-box,linear-gradient(135deg, #000000 -11.37%, rgba(255, 255, 255, 0) 87.48%) border-box",
    "MEDICALS_CATEGORIES_BTN_BG_DAY": "linear-gradient(315deg, #FF8298 12.41%, rgba(255, 255, 255, 0) 59.19%) padding-box,linear-gradient(135deg, #FF8298 -1.37%, rgba(255, 255, 255, 0) 82.48%) border-box",
}


var myCard = [];
var timeVal = "night"
var shopTypes = "247"
var shopTypesAr = [];
$('[name=tab]').each(function(i, d) {
    var p = $(this).prop('checked');
    if (p) {
        $('article').eq(i)
            .addClass('on');
    }
});
window.addEventListener("message", function(event) {
    var item = event.data;
    switch (item.type) {
        case "OPEN_MARKET":
            if(item.saat > 19){
                timeVal = "night"
            }else if (item.saat > 05 && item.saat < 19){
                timeVal = 'day'
            }
          
            $('.shop-logo-resizer img').attr('src','../html/images/'+item.logo+'.png')
        
            $('.userinfoplayername').text('Hello, '+item.name)
            $('body').css('display','block');
            myCard = []
            $('.search-bar-input').css('display','none');
            
            $('.card-main-area').trigger('change')
            $('.card-shop-items').empty();
            $('.login-page').css('display', 'block')
            $('article').removeClass('on');
            $('.shop-container-main').empty();
          
            $('.close-card-buton').trigger('click')
            $('input[type="radio"]').prop('checked', false);
            $('.one-item-area').empty()
            $('.second-item-area').empty()
            $.each(item.bestsellers, function(indexInArray, valueOfElement) {

                if (indexInArray == 0) {
                    $('.one-item-area').append(`
                     <div class="vertical-item">
                       <img src="./images/itemimages/${valueOfElement.itemImage}.png">
                       <div class="item-description">
                         <div class="item-name">
                           <p>${valueOfElement.name}</p>
                         </div>
                         <div class="item-price">
                           <div class="price">
                             <p>$${valueOfElement.itemPrice}</p>
                           </div>
                           <div class="add-to-card-btn">
                             <div class="btn-template" data-price="${valueOfElement.itemPrice}" data-name="${valueOfElement.name}" data-itemName="${valueOfElement.itemName}" data-itemImage="${valueOfElement.itemImage}" data-categories="${valueOfElement.itemCategories}">
                               <p name="add-to-card-select-word">Giỏ Hàng</p>
                               <div class="card-svg-btn">
                                 <svg width="90%" height="90%" viewBox="0 0 58 58" fill="none" xmlns="http://www.w3.org/2000/svg">
                                   <path opacity="0.4" d="M46.4973 13.4853H45.5307L37.3623 5.31701C36.7098 4.66451 35.6465 4.66451 34.9698 5.31701C34.3173 5.96951 34.3173 7.03285 34.9698 7.70951L40.7457 13.4853H17.2557L23.0315 7.70951C23.684 7.05701 23.684 5.99368 23.0315 5.31701C22.379 4.66451 21.3157 4.66451 20.639 5.31701L12.4948 13.4853H11.5282C9.35315 13.4853 4.83398 13.4853 4.83398 19.672C4.83398 22.0162 5.31732 23.5628 6.33232 24.5778C6.91232 25.182 7.61315 25.4962 8.36232 25.6653C9.06315 25.8345 9.81232 25.8587 10.5373 25.8587H47.464C48.2132 25.8587 48.914 25.8103 49.5907 25.6653C51.6207 25.182 53.1673 23.732 53.1673 19.672C53.1673 13.4853 48.6482 13.4853 46.4973 13.4853Z" fill="#737B8F" />
                                   <path d="M47.4891 25.8584H10.5383C9.83745 25.8584 9.06411 25.8342 8.36328 25.6409L11.4083 44.225C12.0849 48.3817 13.8974 53.1667 21.9449 53.1667H35.5024C43.6466 53.1667 45.0966 49.0825 45.9666 44.515L49.6158 25.6409C48.9391 25.81 48.2141 25.8584 47.4891 25.8584ZM29.0016 44.7084C23.3466 44.7084 18.7308 40.0925 18.7308 34.4375C18.7308 33.4467 19.5524 32.625 20.5433 32.625C21.5341 32.625 22.3558 33.4467 22.3558 34.4375C22.3558 38.1109 25.3283 41.0834 29.0016 41.0834C32.6749 41.0834 35.6474 38.1109 35.6474 34.4375C35.6474 33.4467 36.4691 32.625 37.4599 32.625C38.4508 32.625 39.2724 33.4467 39.2724 34.4375C39.2724 40.0925 34.6566 44.7084 29.0016 44.7084Z" fill="#FFFFfF" />
                                 </svg>
                               </div>
                             </div>
                           </div>
                         </div>
                       </div>
                     </div>
                   `)
                } else {
                    $('.second-item-area').append(`
                    <div class="shop-items">
                            <img src="./images/itemimages/${valueOfElement.itemImage}.png">
                            <div class="item-description-normal">
                              <div class="item-name">
                                <p>${valueOfElement.name}</p>
                              </div>
                              <div class="item-price">
                                <div class="price">
                                  <p>$${valueOfElement.itemPrice}</p>
                                </div>
                                <div class="add-to-card-btn">
                                  <div class="btn-template" data-price="${valueOfElement.itemPrice}" data-name="${valueOfElement.name}" data-itemName="${valueOfElement.itemName}" data-itemImage="${valueOfElement.itemImage}" data-categories="${valueOfElement.itemCategories}">
                                    <p name="add-to-card-select-word">Giỏ Hàng</p>
                                    <div class="card-svg-btn">
                                      <svg width="90%" height="90%" viewBox="0 0 58 58" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path opacity="0.4" d="M46.4973 13.4853H45.5307L37.3623 5.31701C36.7098 4.66451 35.6465 4.66451 34.9698 5.31701C34.3173 5.96951 34.3173 7.03285 34.9698 7.70951L40.7457 13.4853H17.2557L23.0315 7.70951C23.684 7.05701 23.684 5.99368 23.0315 5.31701C22.379 4.66451 21.3157 4.66451 20.639 5.31701L12.4948 13.4853H11.5282C9.35315 13.4853 4.83398 13.4853 4.83398 19.672C4.83398 22.0162 5.31732 23.5628 6.33232 24.5778C6.91232 25.182 7.61315 25.4962 8.36232 25.6653C9.06315 25.8345 9.81232 25.8587 10.5373 25.8587H47.464C48.2132 25.8587 48.914 25.8103 49.5907 25.6653C51.6207 25.182 53.1673 23.732 53.1673 19.672C53.1673 13.4853 48.6482 13.4853 46.4973 13.4853Z" fill="#737B8F" />
                                        <path d="M47.4891 25.8584H10.5383C9.83745 25.8584 9.06411 25.8342 8.36328 25.6409L11.4083 44.225C12.0849 48.3817 13.8974 53.1667 21.9449 53.1667H35.5024C43.6466 53.1667 45.0966 49.0825 45.9666 44.515L49.6158 25.6409C48.9391 25.81 48.2141 25.8584 47.4891 25.8584ZM29.0016 44.7084C23.3466 44.7084 18.7308 40.0925 18.7308 34.4375C18.7308 33.4467 19.5524 32.625 20.5433 32.625C21.5341 32.625 22.3558 33.4467 22.3558 34.4375C22.3558 38.1109 25.3283 41.0834 29.0016 41.0834C32.6749 41.0834 35.6474 38.1109 35.6474 34.4375C35.6474 33.4467 36.4691 32.625 37.4599 32.625C38.4508 32.625 39.2724 33.4467 39.2724 34.4375C39.2724 40.0925 34.6566 44.7084 29.0016 44.7084Z" fill="#FFFFfF" />
                                      </svg>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>`)
                }          
            });
            if (timeVal == "night") {
                $('.shop-body').css('background', styleProperty.SHOP_BODY_BG_NIGHT)
                $('.vertical-item').css('background', styleProperty.MAIN_VERTICAL_ITEM_BG_NIGHT)
                $('.shop-items').css('background', styleProperty.MAIN_QUAD_ITEM_BG_NIGHT)
              
                $('.user-info p').css('color', styleProperty.USER_INFO_COLOR_NIGHT)
                $('.login-page > p').css('color', styleProperty.LOGIN_PAGE_DESCRIPTION_NIGHT)
                $(':root').css('--btn-main-inner', styleProperty.MAIN_BTN_INNER_NIGHT)
                $(':root').css('--btn-main-outer', styleProperty.MAIN_BTN_OUTER_NIGHT)
                $(':root').css('--drinks-btn-bg', styleProperty.DRINKS_CATEGORIES_BTN_BG_NIGHT)
                $(':root').css('--all-btn-bg', styleProperty.ALL_CATEGORIES_BTN_BG_NIGHT)
                $(':root').css('--fruits-btn-bg', styleProperty.FRUITS_CATEGORIES_BTN_BG_NIGHT)
                $(':root').css('--alcohols-btn-bg', styleProperty.ALCOHOLS_CATEGORIES_BTN_BG_NIGHT)
                $(':root').css('--fastfood-btn-bg', styleProperty.FASTFOOD_CATEGORIES_BTN_BG_NIGHT)
                $(':root').css('--tools-btn-bg', styleProperty.TOOLS_CATEGORIES_BTN_BG_NIGHT)
                $(':root').css('--medicals-btn-bg', styleProperty.MEDICALS_CATEGORIES_BTN_BG_NIGHT)
                $(':root').css('--btn-main-color', styleProperty.MAIN_BTN_COLOR_NIGHT)
            } else {
                $('.shop-body').css('background', styleProperty.SHOP_BODY_BG_DAY)
                $('.vertical-item').css('background', styleProperty.MAIN_VERTICAL_ITEM_BG_DAY)
                $('.shop-items').css('background', styleProperty.MAIN_QUAD_ITEM_BG_DAY)
           
                $('.user-info p').css('color', styleProperty.USER_INFO_COLOR_DAY)
                $('.login-page > p').css('color', styleProperty.LOGIN_PAGE_DESCRIPTION_DAY)
                $(':root').css('--btn-main-inner', styleProperty.MAIN_BTN_INNER_DAY)
                $(':root').css('--btn-main-outer', styleProperty.MAIN_BTN_OUTER_DAY)
                $(':root').css('--drinks-btn-bg', styleProperty.DRINKS_CATEGORIES_BTN_BG_DAY)
                $(':root').css('--all-btn-bg', styleProperty.ALL_CATEGORIES_BTN_BG_DAY)
                $(':root').css('--fruits-btn-bg', styleProperty.FRUITS_CATEGORIES_BTN_BG_DAY)
                $(':root').css('--alcohols-btn-bg', styleProperty.ALCOHOLS_CATEGORIES_BTN_BG_DAY)
                $(':root').css('--fastfood-btn-bg', styleProperty.FASTFOOD_CATEGORIES_BTN_BG_DAY)
                $(':root').css('--tools-btn-bg', styleProperty.TOOLS_CATEGORIES_BTN_BG_DAY)
                $(':root').css('--medicals-btn-bg', styleProperty.MEDICALS_CATEGORIES_BTN_BG_DAY)
                $(':root').css('--btn-main-color', styleProperty.MAIN_BTN_COLOR_DAY)
            }

            $('#inputSearch').on('input', function() {
                var value = $(this).val().toLowerCase();
                $(".search-items-selector .shop-items-categories").filter(function() {
                    $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                });
            });
            $('.search-bar-deleteicon').on('click', function() {
                $('#inputSearch').val('').trigger('input')
            })


            // $('input.deletable').wrap('<span class="deleteicon"></span>').after($('<span>x</span>').click(function() {
            //     $(this).prev('input').val('').trigger('change').focus();
            //     $('#inputSearch').trigger('input')
            // }));

            $('.card-main-area').change(function() {
                var allPrices = 0
                $.each(myCard, function(indexInArray, valueOfElement) {
                    allPrices = parseInt(valueOfElement.buyItemPrice) + allPrices
                });
                $('.card-info-price .price-card > p').text(allPrices)
                $('.card-info-price .count-card > p').text(myCard.length)
                $('.basket-icon').attr('data-counterCard', myCard.length)
            })
            for (var i = 0; i < shopTypes.length; i++) {
                shopTypesAr.push(shopTypes[i])
            }
            // $('.user-info > p:nth-child(1)').text(localesProperty.USER_WELCOME)
            $('.user-info > p:nth-child(2)').html('Welcome Supermarket')
            $('.login-page > p').text(localesProperty.MOST_SALED_ITEMS)
            $('[name="add-to-card-select-word"]').text(localesProperty.ADD_TO_CARD)
            $('.search-items-selector > div > p , .all-items-selector > div > p').text(localesProperty.ALL_ITEMS_CATEGORIES)
            $('.drinks-selector > div > p').text(localesProperty.DRINKS_ITEMS_CATEGORIES)
            $('.fruits-selector > div > p').text(localesProperty.FRUITS_ITEMS_CATEGORIES)
            $('.alcohols-selector > div > p').text(localesProperty.ALCOHOLS_ITEMS_CATEGORIES)
            $('.fastfood-selector > div > p').text(localesProperty.FASTFOOD_ITEMS_CATEGORIES)
            $('.tools-selector > div > p').text(localesProperty.TOOLS_ITEMS_CATEGORIES)
            $('.medicals-selector > div > p').text(localesProperty.MEDICALS_ITEMS_CATEGORIES)
            $('.my-card-word > p').text(localesProperty.MY_CARD)
            $('.pay-with-cash > p').text(localesProperty.PAY_WITH_CASH)
            $('.pay-with-card > p').text(localesProperty.PAY_WITH_CARD)
            $.each(item.items, function(key, value) {
                $('.all-items-selector .shop-container-main').append(`
       <div class="shop-items-categories">
           <img src="./images/itemimages/${value.itemImage}.png">
           <div class="item-description-normal">
               <div class="item-name-categories">
                   <p>${value.name}</p>
               </div>
               <div class="item-price-categories">
                   <div class="price">
                       <p>$${value.itemPrice}</p>
                   </div>
                   <div class="add-to-card-btn-categories">
                       <div class="btn-template-categories" data-price="${value.itemPrice}" data-name="${value.name}" data-itemName="${value.itemName}" data-itemImage="${value.itemImage}" data-categories="${value.itemCategories}">
                           <p name="add-to-card-select-word">Giỏ Hàng</p>
                           <div class="card-svg-btn"><svg width="90%" height="90%" viewBox="0 0 58 58" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity="0.4" d="M46.4973 13.4853H45.5307L37.3623 5.31701C36.7098 4.66451 35.6465 4.66451 34.9698 5.31701C34.3173 5.96951 34.3173 7.03285 34.9698 7.70951L40.7457 13.4853H17.2557L23.0315 7.70951C23.684 7.05701 23.684 5.99368 23.0315 5.31701C22.379 4.66451 21.3157 4.66451 20.639 5.31701L12.4948 13.4853H11.5282C9.35315 13.4853 4.83398 13.4853 4.83398 19.672C4.83398 22.0162 5.31732 23.5628 6.33232 24.5778C6.91232 25.182 7.61315 25.4962 8.36232 25.6653C9.06315 25.8345 9.81232 25.8587 10.5373 25.8587H47.464C48.2132 25.8587 48.914 25.8103 49.5907 25.6653C51.6207 25.182 53.1673 23.732 53.1673 19.672C53.1673 13.4853 48.6482 13.4853 46.4973 13.4853Z" fill="#737B8F"/><path d="M47.4891 25.8584H10.5383C9.83745 25.8584 9.06411 25.8342 8.36328 25.6409L11.4083 44.225C12.0849 48.3817 13.8974 53.1667 21.9449 53.1667H35.5024C43.6466 53.1667 45.0966 49.0825 45.9666 44.515L49.6158 25.6409C48.9391 25.81 48.2141 25.8584 47.4891 25.8584ZM29.0016 44.7084C23.3466 44.7084 18.7308 40.0925 18.7308 34.4375C18.7308 33.4467 19.5524 32.625 20.5433 32.625C21.5341 32.625 22.3558 33.4467 22.3558 34.4375C22.3558 38.1109 25.3283 41.0834 29.0016 41.0834C32.6749 41.0834 35.6474 38.1109 35.6474 34.4375C35.6474 33.4467 36.4691 32.625 37.4599 32.625C38.4508 32.625 39.2724 33.4467 39.2724 34.4375C39.2724 40.0925 34.6566 44.7084 29.0016 44.7084Z" fill="#FFFFfF"/></svg>
                           </div>
                       </div>
                   </div>
               </div>
           </div>
       </div> 
   `);

                $('.search-items-selector .shop-container-main').append(`
       <div class="shop-items-categories ${value.itemCategories}-${timeVal}">
           <img src="./images/itemimages/${value.itemImage}.png">
           <div class="item-description-normal">
               <div class="item-name-categories">
                   <p>${value.name}</p>
               </div>
               <div class="item-price-categories">
                   <div class="price">
                       <p>$${value.itemPrice}</p>
                   </div>
                   <div class="add-to-card-btn-categories">
                       <div class="btn-template-categories" data-price="${value.itemPrice}" data-name="${value.name}" data-itemName="${value.itemName}" data-itemImage="${value.itemImage}" data-categories="${value.itemCategories}">
                           <p name="add-to-card-select-word">Giỏ Hàng</p>
                           <div class="card-svg-btn"><svg width="90%" height="90%" viewBox="0 0 58 58" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity="0.4" d="M46.4973 13.4853H45.5307L37.3623 5.31701C36.7098 4.66451 35.6465 4.66451 34.9698 5.31701C34.3173 5.96951 34.3173 7.03285 34.9698 7.70951L40.7457 13.4853H17.2557L23.0315 7.70951C23.684 7.05701 23.684 5.99368 23.0315 5.31701C22.379 4.66451 21.3157 4.66451 20.639 5.31701L12.4948 13.4853H11.5282C9.35315 13.4853 4.83398 13.4853 4.83398 19.672C4.83398 22.0162 5.31732 23.5628 6.33232 24.5778C6.91232 25.182 7.61315 25.4962 8.36232 25.6653C9.06315 25.8345 9.81232 25.8587 10.5373 25.8587H47.464C48.2132 25.8587 48.914 25.8103 49.5907 25.6653C51.6207 25.182 53.1673 23.732 53.1673 19.672C53.1673 13.4853 48.6482 13.4853 46.4973 13.4853Z" fill="#737B8F"/><path d="M47.4891 25.8584H10.5383C9.83745 25.8584 9.06411 25.8342 8.36328 25.6409L11.4083 44.225C12.0849 48.3817 13.8974 53.1667 21.9449 53.1667H35.5024C43.6466 53.1667 45.0966 49.0825 45.9666 44.515L49.6158 25.6409C48.9391 25.81 48.2141 25.8584 47.4891 25.8584ZM29.0016 44.7084C23.3466 44.7084 18.7308 40.0925 18.7308 34.4375C18.7308 33.4467 19.5524 32.625 20.5433 32.625C21.5341 32.625 22.3558 33.4467 22.3558 34.4375C22.3558 38.1109 25.3283 41.0834 29.0016 41.0834C32.6749 41.0834 35.6474 38.1109 35.6474 34.4375C35.6474 33.4467 36.4691 32.625 37.4599 32.625C38.4508 32.625 39.2724 33.4467 39.2724 34.4375C39.2724 40.0925 34.6566 44.7084 29.0016 44.7084Z" fill="#FFFFfF"/></svg>
                           </div>
                       </div>
                   </div>
               </div>
           </div>
       </div> 
   `);

                $('.' + value.itemCategories + '-selector .shop-container-main').append(`
       <div class="shop-items-categories">
           <img src="./images/itemimages/${value.itemImage}.png">
           <div class="item-description-normal">
               <div class="item-name-categories">
                   <p>${value.name}</p>
               </div>
               <div class="item-price-categories">
                   <div class="price">
                       <p>$${value.itemPrice}</p>
                   </div>
                   <div class="add-to-card-btn-categories">
                       <div class="btn-template-categories" data-price="${value.itemPrice}" data-name="${value.name}" data-itemName="${value.itemName}" data-itemImage="${value.itemImage}" data-categories="${value.itemCategories}">
                           <p name="add-to-card-select-word">Giỏ Hàng</p>
                           <div class="card-svg-btn"><svg width="90%" height="90%" viewBox="0 0 58 58" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity="0.4" d="M46.4973 13.4853H45.5307L37.3623 5.31701C36.7098 4.66451 35.6465 4.66451 34.9698 5.31701C34.3173 5.96951 34.3173 7.03285 34.9698 7.70951L40.7457 13.4853H17.2557L23.0315 7.70951C23.684 7.05701 23.684 5.99368 23.0315 5.31701C22.379 4.66451 21.3157 4.66451 20.639 5.31701L12.4948 13.4853H11.5282C9.35315 13.4853 4.83398 13.4853 4.83398 19.672C4.83398 22.0162 5.31732 23.5628 6.33232 24.5778C6.91232 25.182 7.61315 25.4962 8.36232 25.6653C9.06315 25.8345 9.81232 25.8587 10.5373 25.8587H47.464C48.2132 25.8587 48.914 25.8103 49.5907 25.6653C51.6207 25.182 53.1673 23.732 53.1673 19.672C53.1673 13.4853 48.6482 13.4853 46.4973 13.4853Z" fill="#737B8F"/><path d="M47.4891 25.8584H10.5383C9.83745 25.8584 9.06411 25.8342 8.36328 25.6409L11.4083 44.225C12.0849 48.3817 13.8974 53.1667 21.9449 53.1667H35.5024C43.6466 53.1667 45.0966 49.0825 45.9666 44.515L49.6158 25.6409C48.9391 25.81 48.2141 25.8584 47.4891 25.8584ZM29.0016 44.7084C23.3466 44.7084 18.7308 40.0925 18.7308 34.4375C18.7308 33.4467 19.5524 32.625 20.5433 32.625C21.5341 32.625 22.3558 33.4467 22.3558 34.4375C22.3558 38.1109 25.3283 41.0834 29.0016 41.0834C32.6749 41.0834 35.6474 38.1109 35.6474 34.4375C35.6474 33.4467 36.4691 32.625 37.4599 32.625C38.4508 32.625 39.2724 33.4467 39.2724 34.4375C39.2724 40.0925 34.6566 44.7084 29.0016 44.7084Z" fill="#FFFFfF"/></svg></div>
                       </div>
                   </div>
               </div>
           </div>
       </div>
   `);
            });
            $('.btn-template-categories').on('click', function() {
                var buyName = $(this).attr('data-name')
                var buyItemName = $(this).attr('data-itemName')
                var buyItemImage = $(this).attr('data-itemImage')
                var buyItemPrice = $(this).attr('data-price')
                var buyCategories = $(this).attr('data-categories')
                addToCard(buyName, buyItemImage, buyItemName, buyItemPrice, buyCategories)
            })

            $('.btn-template').on('click', function() {
                var buyName = $(this).attr('data-name')
                var buyItemName = $(this).attr('data-itemName')
                var buyItemImage = $(this).attr('data-itemImage')
                var buyItemPrice = $(this).attr('data-price')
                var buyCategories = $(this).attr('data-categories')
                addToCard(buyName, buyItemImage, buyItemName, buyItemPrice, buyCategories)
            })


            break;
        case "REFRESH":
            ClearEnv();

            break;



        default:
            break;
    }
});


function addToCard(buyName, buyItemImage, buyItemName, buyItemPrice, buyCategories) {
    itemAr = {
        buyName: buyName,
        buyItemImage: buyItemImage,
        buyItemName: buyItemName,
        buyItemPrice: buyItemPrice,
        buyCategories: buyCategories,
        count: 1
    }
    isDataIn = false

    myCard.filter(function(i) {
        if (i.buyName == buyName) {
            isDataIn = true;
            i.count = i.count + 1;
            $('.shop-items-card .count-card > .' + buyItemName).text(i.count)

            i.buyItemPrice = buyItemPrice * i.count
            $('.shop-items-card .price-card > .' + buyItemName).text('$' + i.buyItemPrice)

            $('.card-main-area').trigger('change')

        }
    });
    if (isDataIn == false) {
        $('.card-shop-items').append(`
          <div class="shop-items-card ${buyCategories}-${timeVal}">
              <div class="item-image-card">
                  <img src="./images/itemimages/${buyItemImage}.png">
              </div>
              <div class="item-name-card">
                  <p>${buyName}</p>
              </div>
              <div class="card-item-info-price">
                  <div class="price-card">
                      <p class="${buyItemName}">$${buyItemPrice}</p>
                  </div>
                  <div class="count-card">
                      <p class="${buyItemName}">1</p>
                  </div>
              </div>
              <div class="close-dot-outer">
                  <div class="close-dot-blurred"></div>
                  <div class="close-dot"></div>
              </div>
          </div>`)
        myCard.push(itemAr)
        $('.card-main-area').trigger('change')
    }

    $('.close-dot').on('click', function() {
        var itemCardBuyName = $(this).parent().parent().find('.count-card > p').attr('class')

        myCard.filter(function(i) {
            if (i.buyItemName == itemCardBuyName) {
                var index = myCard.indexOf(i);
                myCard.splice(index, 1)
            }
        });
        $(this).parent().parent().remove()
        $('.card-main-area').trigger('change')
    })

}

$('[type=radio]').on('click', function() {
    var p = $(this).prop('checked');
    $('.login-page').css('display', 'none')
    var i = $('[name=tab]').index(this);

    $('article').removeClass('on');
    var classNameFinder = $('article').eq(i).attr('class')
    if (classNameFinder == 'search-items-selector') {
        $('.shop-title-area > .user-info p').css('display', 'none')
        $('.search-bar-input').css('display', 'block')
    } else {
        $('.shop-title-area > .user-info p').css('display', 'block')
        $('.search-bar-input').css('display', 'none')
    }
    if (timeVal == "night") {
        $('.shop-body').css('background', 'linear-gradient(180deg, rgba(255, 255, 255, 0.81) 0%, rgba(218, 218, 218, 0.51) 134.86%)')
        switch (classNameFinder) {
            case "search-items-selector":
              $('.shop-body').css('background', 'linear-gradient(180deg, #1D0D00 0%, #100A05 134.86%), linear-gradient(301.95deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 28.96%), linear-gradient(122.69deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 18.32%)')
              $('.shop-categories').css('borderRight', '1px solid rgba(232, 120, 39, 0.3)')
              $('.main-shop-categories > p').css('color', '#FFFFFF')
              break;
          case "all-items-selector":
              $('.shop-body').css('background', 'linear-gradient(180deg, #1D0D00 0%, #100A05 134.86%), linear-gradient(301.95deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 28.96%), linear-gradient(122.69deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 18.32%)')
              $('.shop-categories').css('borderRight', '1px solid rgba(232, 120, 39, 0.3)')
              $('.shop-items-categories').css('background', '#2D1E13')
              $('.main-shop-categories > p').css('color', '#FFFFFF')
              break;
          case "drinks-selector":
              $('.shop-body').css('background', 'linear-gradient(180deg, #011B1D 0%, #071010 134.86%), linear-gradient(301.95deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 28.96%), linear-gradient(122.69deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 18.32%)')
              $('.shop-categories').css('borderRight', '1px solid rgba(10, 136, 153, 0.3)')
              $('.shop-items-categories').css('background', 'rgba(33, 192, 227, 0.15)')
              $('.main-shop-categories > p').css('color', '#03D9F6')

              break;

          case "fruits-selector":
              $('.shop-body').css('background', 'linear-gradient(180deg, #011D0F 0%, #07120B 134.86%),linear-gradient(301.95deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 28.96%),linear-gradient(122.69deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 18.32%)')
              $('.shop-categories').css('borderRight', '1px solid rgba(0, 164, 37, 0.3)')
              $('.shop-items-categories').css('background', 'rgba(60, 227, 33, 0.15)')
              $('.main-shop-categories > p').css('color', '#00FF39')

              break;

          case "alcohols-selector":
              $('.shop-body').css('background', 'linear-gradient(180deg, #1D0101 0%, #130706 134.86%),linear-gradient(301.95deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 28.96%),linear-gradient(122.69deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 18.32%)')
              $('.shop-categories').css('borderRight', '1px solid rgba(164, 0, 0, 0.3)')
              $('.shop-items-categories').css('background', 'rgba(227, 33, 33, 0.15)')
              $('.main-shop-categories > p').css('color', '#FF0000')

              break;

          case "fastfood-selector":
              $('.shop-body').css('background', 'linear-gradient(180deg, #1C1001 0%, #100B04 134.86%),linear-gradient(301.95deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 28.96%),linear-gradient(122.69deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 18.32%)')
              $('.shop-categories').css('borderRight', '1px solid rgba(164, 59, 0, 0.3)')
              $('.shop-items-categories').css('background', 'rgba(227, 150, 33, 0.15)')
              $('.main-shop-categories > p').css('color', '#FF6B00')
              break;

          case "tools-selector":
              $('.shop-body').css('background', 'linear-gradient(180deg, #191919 0%, #11110F 134.86%), linear-gradient(301.95deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 28.96%), linear-gradient(122.69deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 18.32%)')
              $('.shop-categories').css('borderRight', '1px solid rgba(255, 255, 255, 0.3)')
              $('.shop-items-categories').css('background', 'rgba(255, 255, 255, 0.15)')
              $('.main-shop-categories > p').css('color', '#FFFFFF')
              break;

          case "medicals-selector":
              $('.shop-body').css('background', 'linear-gradient(180deg, #2D0120 0%, #160410 134.86%),linear-gradient(301.95deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 28.96%),linear-gradient(122.69deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 18.32%)')
              $('.shop-categories').css('borderRight', '1px solid rgba(198, 0, 83, 0.3)')
              $('.shop-items-categories').css('background', 'rgba(227, 33, 150, 0.15)')
              $('.main-shop-categories > p').css('color', '#FF006B')
              break;
      }
    } else {
        $('.shop-body').css('background', 'linear-gradient(180deg, #CDD1CB 0%, #999999 134.86%), linear-gradient(117.6deg, rgba(255, 255, 255, 0) 0%, #FFFFFF 122.24%), linear-gradient(117.6deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 122.24%)')
        switch (classNameFinder) {
            case "search-items-selector":
                $('.shop-body').css('background', 'linear-gradient(180deg, #F6E2CE 0%, #A19D9A 134.86%), linear-gradient(117.6deg, rgba(255, 255, 255, 0) 0%, #FFFFFF 122.24%), linear-gradient(117.6deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 122.24%)')
                $('.shop-categories').css('borderRight', '1px solid rgba(232, 120, 39, 0.3)')
                $('.shop-items-categories').css('background', 'rgba(227, 119, 33, 0.15)')
                $('.main-shop-categories > p').css('color', '#737B8F')
                break;
            case "all-items-selector":
                $('.shop-body').css('background', 'linear-gradient(180deg, #F6E2CE 0%, #A19D9A 134.86%), linear-gradient(117.6deg, rgba(255, 255, 255, 0) 0%, #FFFFFF 122.24%), linear-gradient(117.6deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 122.24%)')
                $('.shop-categories').css('borderRight', '1px solid rgba(232, 120, 39, 0.3)')
                $('.shop-items-categories').css('background', 'rgba(227, 119, 33, 0.15)')
                $('.main-shop-categories > p').css('color', '#737B8F')
                break;
            case "drinks-selector":
                $('.shop-body').css('background', 'linear-gradient(180deg, #CDF3F5 0%, #B4B5AD 134.86%), linear-gradient(117.6deg, rgba(255, 255, 255, 0) 0%, #FFFFFF 122.24%), linear-gradient(117.6deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 122.24%)')
                $('.shop-categories').css('borderRight', '1px solid rgba(10, 136, 153, 0.3)')
                $('.shop-items-categories').css('background', 'rgba(33, 122, 227, 0.15)')
                $('.main-shop-categories > p').css('color', '#0A8899')
                break;
            case "fruits-selector":
                $('.shop-body').css('background', 'linear-gradient(180deg, #D1FCDB 0%, #B2B5A7 134.86%), linear-gradient(117.6deg, rgba(255, 255, 255, 0) 0%, #FFFFFF 122.24%), linear-gradient(117.6deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 122.24%)')
                $('.shop-categories').css('borderRight', '1px solid rgba(0, 164, 37, 0.3)')
                $('.shop-items-categories').css('background', 'rgba(33, 227, 111, 0.15)')
                $('.main-shop-categories > p').css('color', '#449C58')
                break;
            case "alcohols-selector":
                $('.shop-body').css('background', 'linear-gradient(180deg, #F9D3D0 0%, #B9ADA5 134.86%), linear-gradient(117.6deg, rgba(255, 255, 255, 0) 0%, #FFFFFF 122.24%), linear-gradient(117.6deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 122.24%)')
                $('.shop-categories').css('borderRight', '1px solid rgba(164, 0, 0, 0.3)')
                $('.shop-items-categories').css('background', 'rgba(227, 33, 33, 0.15)')
                $('.main-shop-categories > p').css('color', '#8E3E3E')
                break;
  
            case "fastfood-selector":
                $('.shop-body').css('background', 'linear-gradient(180deg, #F8D7B4 0%, #BCB1A2 134.86%), linear-gradient(117.6deg, rgba(255, 255, 255, 0) 0%, #FFFFFF 122.24%), linear-gradient(117.6deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 122.24%)')
                $('.shop-categories').css('borderRight', '1px solid rgba(164, 59, 0, 0.3)')
                $('.shop-items-categories').css('background', 'rgba(227, 80, 33, 0.15)')
                $('.main-shop-categories > p').css('color', '#B46C27')
                break;
  
            case "tools-selector":
                $('.shop-body').css('background', 'linear-gradient(180deg, #B7BAB7 0%, #B2ADA4 134.86%), linear-gradient(117.6deg, rgba(255, 255, 255, 0) 0%, #FFFFFF 122.24%), linear-gradient(117.6deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 122.24%)')
                $('.shop-categories').css('borderRight', '1px solid rgba(255, 255, 255, 0.3)')
                $('.shop-items-categories').css('background', 'rgba(255, 255, 255, 0.15)')
                $('.main-shop-categories > p').css('color', '#FFFFFF')
                break;
  
            case "medicals-selector":
                $('.shop-body').css('background', 'linear-gradient(180deg, #F8B7C9 0%, #BDABA6 134.86%), linear-gradient(117.6deg, rgba(255, 255, 255, 0) 0%, #FFFFFF 122.24%), linear-gradient(117.6deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 122.24%)')
                $('.shop-categories').css('borderRight', '1px solid rgba(198, 0, 83, 0.3)')
                $('.shop-items-categories').css('background', 'rgba(227, 33, 91, 0.15)')
                $('.main-shop-categories > p').css('color', '#C60053')
                break;
        }
    }
    $('article').eq(i).addClass('on');
});

$('.basket-icon svg').on('click', function() {
    $('.card-main-area').show().animate({
        'left': '70%'
    }, 1000, function() {})
  })
  
  $('.close-card-buton').on('click', function() {
    $('.card-main-area').animate({
        'left': '100%'
    }, 1000, function() {
        $('.card-main-area').hide()
    })
  })

$('input[type="radio"]').on('input', function() {
   
})


$('.close-buton-market').on('click', function() {
   
    $.post("https://lux-shoping/close", JSON.stringify({}));
    $('body').css('display', 'none')
});

$('.pay-with-cash').on('click', function() {

    $.post("https://lux-shoping/buyitem", JSON.stringify({
        buyitem: myCard,
        paytype: 'cash'
    }));
     ClearEnv();
});
$('.pay-with-card').on('click', function() {
 
    $.post("https://lux-shoping/buyitem", JSON.stringify({
        buyitem: myCard,
        paytype: 'bank'
    }));
     ClearEnv();
});

function ClearEnv(){
    myCard = [];
    $('.card-main-area').trigger('change')
    $('.card-shop-items').empty();
    
}

  
$(document).keydown(function(e) {
    if (e.keyCode == 27) {
        $.post("https://lux-shoping/close");
        $('body').css('display', 'none');
  
    }
  });